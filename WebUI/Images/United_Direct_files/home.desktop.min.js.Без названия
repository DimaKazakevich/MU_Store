if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||3<t[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(u){"use strict";function r(s){return this.each(function(){var t=u(this),e=t.data("bs.carousel"),i=u.extend({},h.DEFAULTS,t.data(),"object"==typeof s&&s),n="string"==typeof s?s:i.slide;e||t.data("bs.carousel",e=new h(this,i)),"number"==typeof s?e.to(s):n?e[n]():i.interval&&e.pause().cycle()})}function h(t,e){this.$element=u(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",u.proxy(this.keydown,this)),"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",u.proxy(this.pause,this)).on("mouseleave.bs.carousel",u.proxy(this.cycle,this))}h.VERSION="3.3.7",h.TRANSITION_DURATION=600,h.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},h.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},h.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(u.proxy(this.next,this),this.options.interval)),this},h.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},h.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},h.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||t<0?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},h.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&u.support.transition&&(this.$element.trigger(u.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},h.prototype.next=function(){return this.sliding?void 0:this.slide("next")},h.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},h.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),n=e||this.getItemForDirection(t,i),s=this.interval,a="next"==t?"left":"right",r=this;if(n.hasClass("active"))return this.sliding=!1;var o=n[0],l=u.Event("slide.bs.carousel",{relatedTarget:o,direction:a});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=u(this.$indicators.children()[this.getItemIndex(n)]);c&&c.addClass("active")}var d=u.Event("slid.bs.carousel",{relatedTarget:o,direction:a});return u.support.transition&&this.$element.hasClass("slide")?(n.addClass(t),n[0].offsetWidth,i.addClass(a),n.addClass(a),i.one("bsTransitionEnd",function(){n.removeClass([t,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),r.sliding=!1,setTimeout(function(){r.$element.trigger(d)},0)}).emulateTransitionEnd(h.TRANSITION_DURATION)):(i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(d)),s&&this.cycle(),this}};var t=u.fn.carousel;u.fn.carousel=r,u.fn.carousel.Constructor=h,u.fn.carousel.noConflict=function(){return u.fn.carousel=t,this};function e(t){var e,i=u(this),n=u(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var s=u.extend({},n.data(),i.data()),a=i.attr("data-slide-to");a&&(s.interval=!1),r.call(n,s),a&&n.data("bs.carousel").to(a),t.preventDefault()}}u(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),u(window).on("load",function(){u('[data-ride="carousel"]').each(function(){var t=u(this);r.call(t,t.data())})})}(jQuery),function(n){"use strict";n.fn.emulateTransitionEnd=function(t){var e=!1,i=this;n(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||n(i).trigger(n.support.transition.end)},t),this},n(function(){n.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){return n(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),angular.module("kitbag").directive("brandSelectorCarousel",["$animate","$timeout","$q",function(h,p,f){return{scope:{campaigns:"="},templateUrl:"/Stores/Scripts/Shared/Directives/BrandSelector/BrandSelector.html",link:function(a,i){var r,o,l=i.find(".brandSelectorBrands"),c=i.find(".navigator"),d=35;function e(s){a.animating=!0;var t=l.children().map(function(t,e){var i=$(e),n=i.position().left;return h.animate(i,{left:n+"px"},{left:n+r*s+"px"},"carouselAnimation")});return f.all(t).then(function(){a.animating=!1})}function u(i){l.children().each(function(t,e){$(e).css("left",r*(t+i)+o)})}function n(t){var e,i,n=l.width(),s=a.selectedCampaign.Brands.length;r=t.outerWidth(!0),l.height(t.outerHeight(!0)),a.itemsFitWithoutScrolling=r*s<n,a.itemsFitWithoutScrolling?o=(n-r*s)/2:(e=Math.floor((n-2*d)/r),o=(i=(n-e*r)/2)-r,c.width(i),a.selectedCampaign.initialised||(a.selectedCampaign.Brands.unshift(a.selectedCampaign.Brands.pop()),a.selectedCampaign.initialised=!0),s-e<3&&function(){var t,e=a.selectedCampaign.Brands.length;for(t=0;t<e;t++)a.selectedCampaign.Brands.push(angular.copy(a.selectedCampaign.Brands[t]))}()),p(function(){u(0)})}a.selectCampaign=function(t){a.selectedCampaign=t,p(function(){!function(){var t=i.find(".brandSelectorBrandItem"),e=t.find("img").eq(0);e[0].complete?n(t):e.one("load",function(){n(t)})}()})},a.next=function(){if(!a.animating){var t=a.selectedCampaign.Brands[0];a.selectedCampaign.Brands.push(t),e(-1).then(function(){a.selectedCampaign.Brands.shift(),u(0)})}},a.previous=function(){if(!a.animating){u(-1);var t=a.selectedCampaign.Brands.pop();a.selectedCampaign.Brands.unshift(t),e(1)}},a.selectCampaign(a.campaigns[0])}}}]);